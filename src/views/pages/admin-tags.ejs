<div class="mx-auto flex w-full max-w-screen-lg flex-col gap-4">
  <h1 class="text-2xl font-semibold">Manage Tags</h1>

  <!-- Insert Form -->
  <form action="/admin/tags" method="POST" class="mb-4">
    <input type="hidden" name="_method" value="POST" />
    <div class="flex items-center gap-2">
      <input
        type="text"
        name="tag"
        class="flex-1 border p-2"
        placeholder="Enter new tag"
        required
      />
      <button type="submit" class="rounded bg-green-500 p-2 text-white">
        Add Tag
      </button>
    </div>
  </form>

  <% adminTags.forEach((tags) => { %>
  <details
    tags-id="<%= tags._id %>"
    class="rounded-lg border-2 border-zinc-400"
  >
    <summary
      class="flex w-full items-center justify-between px-4 py-2 marker:m-0 marker:appearance-none marker:p-0"
    >
      <h2 id="tags-name-<%= tags._id %>" class="inline-block font-semibold">
        <%= tags.tag %>
      </h2>
      <div class="flex flex-row items-center gap-px">
        <!-- Edit Button -->
        <button
          onclick="confirmEdit('<%= tags._id %>','tags')"
          class="rounded bg-blue-500 p-2 text-white"
        >
          Confirm
        </button>
        <<<<<<< HEAD
        <button
          onclick="cancelEdit('<%= tags._id %>','tags')"
          class="rounded bg-gray-300 p-2 text-black"
        >
          Cancel
        </button>
      </div>

      <button
        class="flex items-center justify-center p-2 duration-200 hover:bg-zinc-200"
        onclick="confirmDelete('<%= tags._id %>')"
        title="Delete"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 -960 960 960"
          class="size-6"
          aria-label="Delete"
        >
          <path
            d="M273.78-100.78q-44.3 0-75.15-30.85-30.85-30.85-30.85-75.15v-507q-22.09 0-37.54-15.46-15.46-15.46-15.46-37.54 0-22.09 15.46-37.55 15.45-15.45 37.54-15.45H347q0-22.09 15.46-37.55 15.45-15.45 37.54-15.45h158.87q22.09 0 37.54 15.45 15.46 15.46 15.46 37.55h180.35q22.09 0 37.54 15.45 15.46 15.46 15.46 37.55 0 22.08-15.46 37.54-15.45 15.46-37.54 15.46v507q0 44.3-30.85 75.15-30.85 30.85-75.15 30.85H273.78Zm412.44-613H273.78v507h412.44v-507ZM396.61-280.57q19.26 0 32.74-13.47 13.48-13.48 13.48-32.74v-267.57q0-19.26-13.48-32.74t-32.74-13.48q-19.26 0-33.02 13.48-13.76 13.48-13.76 32.74v267.57q0 19.26 13.76 32.74 13.76 13.47 33.02 13.47Zm167.35 0q19.26 0 32.74-13.47 13.47-13.48 13.47-32.74v-267.57q0-19.26-13.47-32.74-13.48-13.48-32.74-13.48t-33.03 13.48q-13.76 13.48-13.76 32.74v267.57q0 19.26 13.76 32.74 13.77 13.47 33.03 13.47ZM273.78-713.78v507-507Z"
          />
        </svg>
      </button>

      <div
        id="delete-modal"
        style="
          display: none !important;
          position: fixed;
          inset: 0;
          background-color: rgba(0, 0, 0, 0.5);
          z-index: 1000;
          display: flex;
          justify-content: center;
          align-items: center;
        "
        class="fixed inset-0 flex hidden items-center justify-center bg-black bg-opacity-50"
      >
        <div class="model-content">
          <div class="rounded-lg bg-white p-6 text-center shadow-lg">
            <p class="mb-4 text-lg font-semibold">
              Bạn chắc chắn muốn xóa tag này chứ?
            </p>
            <div class="flex justify-center gap-4">
              <button
                id="cancel-btn"
                class="rounded bg-gray-300 px-4 py-2 text-black"
                onclick="closeModal()"
              >
                Cancel
              </button>
              <button
                id="confirm-btn"
                class="rounded bg-red-500 px-4 py-2 text-white"
              >
                Confirm
              </button>
            </div>
          </div>
        </div>
        =======

        <!-- Edit Form -->
        <form
          id="edit-form-tags-<%= tags._id %>"
          class="hidden"
          action="/admin/tags"
          method="POST"
        >
          <input type="hidden" name="_method" value="PUT" />
          <input type="hidden" name="id" value="<%= tags._id %>" />
          <input
            type="text"
            name="tag"
            id="edit-input-tags-<%= tags._id %>"
            class="border p-2"
            value="<%= tags.tag %>"
          />
          <button type="submit" class="rounded bg-blue-500 p-2 text-white">
            Confirm
          </button>
          <button
            type="button"
            onclick="cancelEdit('<%= tags._id %>', 'tags')"
            class="rounded bg-gray-300 p-2 text-black"
          >
            Cancel
          </button>
        </form>

        <!-- Delete Form -->
        <form
          action="/admin/tags"
          method="POST"
          class="inline-block"
          onsubmit="return confirm('Are you sure you want to delete this tag?');"
        >
          <input type="hidden" name="_method" value="DELETE" />
          <input type="hidden" name="id" value="<%= tags._id %>" />
          <button
            type="submit"
            class="flex items-center justify-center p-2 duration-200 hover:bg-zinc-200"
            title="Delete"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 -960 960 960"
              class="size-6"
              aria-label="Delete"
            >
              <path
                d="M273.78-100.78q-44.3 0-75.15-30.85-30.85-30.85-30.85-75.15v-507q-22.09 0-37.54-15.46-15.46-15.46-15.46-37.54 0-22.09 15.46-37.55 15.45-15.45 37.54-15.45H347q0-22.09 15.46-37.55 15.45-15.45 37.54-15.45h158.87q22.09 0 37.54 15.45 15.46 15.46 15.46 37.55h180.35q22.09 0 37.54 15.45 15.46 15.46 15.46 37.55 0 22.08-15.46 37.54-15.45 15.46-37.54 15.46v507q0 44.3-30.85 75.15-30.85 30.85-75.15 30.85H273.78Zm412.44-613H273.78v507h412.44v-507ZM396.61-280.57q19.26 0 32.74-13.47 13.48-13.48 13.48-32.74v-267.57q0-19.26-13.48-32.74t-32.74-13.48q-19.26 0-33.02 13.48-13.76 13.48-13.76 32.74v267.57q0 19.26 13.76 32.74 13.76 13.47 33.02 13.47Zm167.35 0q19.26 0 32.74-13.47 13.47-13.48 13.47-32.74v-267.57q0-19.26-13.47-32.74-13.48-13.48-32.74-13.48t-33.03 13.48q-13.76 13.48-13.76 32.74v267.57q0 19.26 13.76 32.74 13.77 13.47 33.03 13.47ZM273.78-713.78v507-507Z"
              />
            </svg>
          </button>
        </form>
        >>>>>>> origin/admin
      </div>
    </summary>
  </details>
  <% }); %>
</div>

<script>
  function startEditing(entityId, entityType) {
    document.getElementById(`${entityType}-name-${entityId}`).style.display =
      "none";
    document.getElementById(
      `edit-btn-${entityType}-${entityId}`,
    ).style.display = "none";
    document
      .getElementById(`edit-form-${entityType}-${entityId}`)
      .classList.remove("hidden");
  }

  function cancelEdit(entityId, entityType) {
    document.getElementById(`${entityType}-name-${entityId}`).style.display =
      "inline-block";
    document.getElementById(
      `edit-btn-${entityType}-${entityId}`,
    ).style.display = "flex";
    document
      .getElementById(`edit-form-${entityType}-${entityId}`)
      .classList.add("hidden");
  }
</script>
